#!/bin/bash
# ComfyUI Launch Wrapper Script
# Generated by Ansible - do not edit manually

set -e

# Activate virtual environment
source {{ comfyui_venv_dir }}/bin/activate

# Change to ComfyUI directory
cd {{ comfyui_app_dir }}

# Build launch arguments
LAUNCH_ARGS=(
{% for arg in comfyui_launch_args %}
    {{ arg }}
{% endfor %}
{% for arg in comfyui_extra_launch_args %}
    {{ arg }}
{% endfor %}
)

# Log startup
echo "Starting ComfyUI at $(date)"
echo "Working Directory: $(pwd)"
echo "Python: $(which python)"
echo "Launch Arguments: ${LAUNCH_ARGS[@]}"

# Launch ComfyUI
exec python main.py "${LAUNCH_ARGS[@]}"
